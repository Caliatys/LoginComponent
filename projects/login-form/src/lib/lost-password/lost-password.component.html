<!-- NOTE: <form autocomplete="off"> will turn off autocomplete for the form in most browsers
     except for username/email/password fields -->
<form (ngSubmit)="send()" [formGroup]="formGroup" autocomplete="off">

  <!-- NOTE: fake fields are a workaround for chrome/opera autofill getting the wrong fields -->
  <input id="username" style="display:none" type="text" name="fakeusernameremembered">
  <input id="password" style="display:none" type="password" name="fakepasswordremembered">

  <div class="header py-2 px-4">
    <div class="row align-items-center">
      <div class="col">
        <div *ngIf="!isFirst">
          <span class="h5 font-weight-light">{{ labels.lostPasswordLabel }}</span>
        </div>
        <div *ngIf="isFirst">
          <span class="d-block h5 mb-0 font-weight-light">{{ labels.updatePasswordLabel }}</span>
          <span class="d-block font-weight-light small">{{ labels.updatePasswordMessageLabel }}</span>
        </div>
      </div>
      <div class="col-2 px-0 text-right">
        <button mat-icon-button mat-dialog-close>
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>
  </div>
  <!-- NOTE: <input autocomplete="nope"> turns off autocomplete on many other browsers that don't respect
        the form's "off", but not for "password" inputs. -->
  <mat-dialog-content class="py-4">
    <div class="row w-100 no-gutters" *ngIf="!isFirst">
      <div class="col">
        <div class="w-100">
          <p class="small">{{ labels.verifCodeMessageLabel }}</p>
        </div>
        <mat-form-field class="w-100">
          <input matInput formControlName="verifCode" 
            name="verif-code" autocomplete="nope" 
            placeholder="{{ labels.verifCodeLabel }}" 
            pattern="[\S]+" 
            type="text"/> <!-- NOTE: Pattern matches any non-whitespace character -->
          <!-- NOTE: Error messages can be displayed -->
          <!-- <mat-hint align="start" *ngIf="formGroup.controls.verifCode.errors?.required">
            {{ labels.fieldRequiredLabel }}
          </mat-hint>
          <mat-hint align="start" *ngIf="formGroup.controls.verifCode.errors?.pattern">
            {{ labels.fieldNonWhitespaceLabel }}
          </mat-hint> -->
        </mat-form-field>
      </div>
    </div>
    <!-- NOTE: <input type="password" autocomplete="new-password" will turn it off for passwords everywhere -->
    <div class="row w-100 no-gutters">
      <div class="col">
        <mat-form-field class="w-100">
          <input matInput formControlName="newPassword" 
            name="new-password" autocomplete="new-password" 
            placeholder="{{ labels.newPasswordLabel }}" 
            type="password"/>
          <!-- NOTE: Error messages can be displayed -->
          <!-- <mat-hint align="start" *ngIf="formGroup.controls.newPassword.errors?.required">
            {{ labels.fieldRequiredLabel }}
          </mat-hint> -->
        </mat-form-field>
      </div>
    </div>
    <div class="row w-100 no-gutters">
      <div class="col">
        <ul class="list-unstyled small">
          <li>{{ labels.policyPassword1Label }}</li>
          <li>{{ labels.policyPassword2Label }}</li>
          <li>{{ labels.policyPassword3Label }}</li>
          <li>{{ labels.policyPassword4Label }}</li>
          <li>{{ labels.policyPassword5Label }}</li>
        </ul>
      </div>
    </div>
    <!-- TODO: Enable Google Captcha -->
    <!-- <div class="row w-100 no-gutters">
      <div class="col">
        <re-captcha site_key="6LdBtAkUAAAAAB2_l_TOz7oZmTLXaFjP1cxnu4yM"
          (captchaResponse)="handleCorrectCaptcha($event)">
        </re-captcha>
      </div>
    </div> -->
  </mat-dialog-content>
  <mat-dialog-actions class="pt-0 pb-4 px-4">
    <div class="row w-100 no-gutters">
      <div class="col text-right">
        <button color="primary" mat-raised-button class="small text-uppercase" type="submit" [disabled]="!formGroup.valid">
          {{ labels.sendLabel }}
        </button>
      </div>
    </div>
  </mat-dialog-actions>
</form>